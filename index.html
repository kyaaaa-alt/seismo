<html>

<head>
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <title>Earthquake Early Warning</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
  <link href="custom.css" rel="stylesheet">
  <script src="mobile-detect.js"></script>
  <script src="NoSleep.min.js"></script>
</head>

<body>
  <div class="container">
    <div class="mt-3 mb-3">

      <div class="d-flex align-items-center">
        <div class="p-2 bg-danger rounded me-2" style="margin-top: 16px;">
          <i class="bi bi-heart-pulse text-light" style="font-size: 25px;"></i>
        </div>
        <h5 class="text-white mt-2">
          Earthquake Early Warning
        </h5>
      </div>

      <span id="jam" class="badge" style="margin-top: -18px;margin-left: 43px;"></span>
    </div>

    <div class="alert alert-warning p-2 ps-3 alert-dismissible fade show mt-0" role="alert">
      <small><a type="button" class="text-primary" data-bs-toggle="modal"
          data-bs-target="#exampleModal"><strong><i class="bi bi-info-circle"></i>
            Baca Panduan</strong></a> & Aktifkan Mode Suara!</small>
      <button type="button" class="btn-close p-2" style="margin-top: 3px;" data-bs-dismiss="alert"
        aria-label="Close"></button>
    </div>

    <div id="settings">
      <div class="text-center d-flex justify-content-between">
        <button type="button" id="startBtn" class="w-100 me-2 btn-success btn btn-lg rounded-pill"><i class="bi bi-play-circle"></i> START</button>
        <button type="button" id="stopBtn" class="w-100 btn-danger btn btn-lg rounded-pill"><i
            class="bi bi-stop-circle"></i> STOP</button>
      </div>
      <div class="text-center mt-3 mb-3">
        <span id="aktif" class="badge text-bg-success rounded-pill p-2 px-4">ALARM AKTIF</span>
        <span id="tidakaktif" class="badge text-bg-danger rounded-pill p-2 px-4">ALARM TIDAK AKTIF</span>
      </div>
      <div id="sens">
        <label for="sele" class="text-white mb-1">Pilih Tingkat Sensitivitas Deteksi</label>
        <select id="sele" class="form-select col-xs-12">
          <option value="1">[Level 1] Sangat Sensitif</option>
          <option value="2">[Level 2] Sensitif</option>
          <option value="3">[Level 3] Normal</option>
          <option value="4">[Level 4] Sensitif Sedang</option>
          <option value="5">[Level 5] Sensitif Rendah</option>
        </select>
      </div>
    </div>

    <div class="text-center" style="display: none;" id="reload">
      <button type="button" id="startBtn" onclick="window.location.reload()" class="w-75 me-2 btn-success btn"><i
          class="bi bi-arrow-clockwise"></i> Reload/Muat Ulang</button>
    </div>
    <div class="col-xs-12 canvas-container">
      <canvas id="canvas" width="640" height="100"></canvas>
    </div>
    <textarea class="col-xs-12 form-control" id="error-message" rows="4"
      style="margin-top: 10px !important;margin-bottom: 10px;" placeholder="Log area..." disabled></textarea>
    <div class="text-center">
      <div class="d-flex justify-content-center mt-3">
        <div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn text-white px-3 me-1" data-bs-toggle="modal"
            data-bs-target="#exampleModal"><i class="bi bi-info-circle"></i> Panduan</button>
        </div>
        <div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn text-white px-3 ms-1" data-bs-toggle="modal"
            data-bs-target="#logModal"><i class="bi bi-clock-history"></i> Riwayat</button>
        </div>
      </div>
      
      <div class="mt-4">
        <p class="text-white">#SemogaLekasPulih #PrayForCianjur</p>
        <a href="https://kitabisa.com/campaign/jqruntukcianjur" target="_blank" type="button"
          class="btn btn-success btn-md px-4 rounded-pill"><i class="bi bi-box2-heart"></i> Donasi Untuk
          Cianjur</a>
        <p class="text-white-50 mt-1" style="font-size: 10px;">Donasi via Jabar Quick Response melalui kitabisa.com
        </p>

        <div class="d-flex justify-content-center mt-3">
          <a href="https://nauf.space/donate" target="_blank" type="button"
            class="btn btn-outline-secondary btn-sm mx-1">Traktir Developer</a>
        </div>


      </div>
    </div>
    <div class="mb-4"></div>
    <div class="text-center mb-4">
      <small class="text-white-50" style="font-size: 11px;">Develop by <a class="text-decoration-none text-white"
          href="https://nauf.space/" target="_blank">M Naufal Azkia</a></small>
      <small class="text-white-50 d-block" style="font-size: 10px;">v1.2.0</small>
    </div>
  </div>

  <!-- Panduan Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable container">
      <div class="modal-content">
        <div class="modal-body bg-dark rounded">
          <p style="color:#fff;">Situs ini menggunakan Sensor Gyroscope Accelerometer pada perangkat HP atau tablet
            anda. jika sensor mendeteksi getaran, maka akan muncul suara peringatan.</p>

          <p style="color:#fff;"><b>Cara menggunakan : </b><br>Sebelum anda menekan Tombol "START", Simpan HP anda di dekat
            anda, di tempat yang mudah terguncang, bisa juga simpan HP dengan posisi miring bersandar kesebuah benda
            yang mudah terguncang. setelah disimpan, pastikan handphone tidak bergerak sama sekali, lalu klik tombol
            "START"</p>

          <p style="color:#fff;"><b>Penting</b> : <br>Alarm tidak akan berfungsi apabila HP dalam keadaan membuka Aplikasi Lain, dan Layar mati karena Screenlock atau Layar Terkunci. Maka dari itu biarkan posisi hp anda sedang membuka situs ini (tidak dalam posisi halaman lain/aplikasi lain) Redupkan cahaya layar anda (bukan matikan layar/kunci layar) agar tidak terlalu menguras baterai, lalu "START" alarm anda!<br></p>

          <p style="color:#fff;"><b>Tujuan</b> situs ini untuk antisipasi adanya gempa saat anda tidur, agar anda cepat terbangun bila adanya gempa.<br></p>

          <p style="color:#fff;"><b>Gunakan browser google chrome terbaru!</p>
          <div style="text-align: center;">
            <a class="btn btn-danger" data-bs-dismiss="modal">Tutup</a>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- History Modal -->
  <div class="modal fade" id="logModal" tabindex="-1" aria-labelledby="logModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable container">
      <div class="modal-content">
        <div class="modal-body bg-dark rounded p-2">
          <p class="text-white text-center mt-2" style="font-size: 18px;font-weight:500;"><i class="bi bi-clock-history"></i> Riwayat</p>
          <textarea class="col-xs-12 form-control border-0" id="history" rows="10" style="margin-top: 10px !important;margin-bottom: 10px;" placeholder="Riwayat kosong..." disabled></textarea>
          <div style="text-align: right;">
            <a class="btn btn-danger btn-sm" onclick="clearHistory()"><i class="bi bi-trash"></i> Hapus Riwayat</a>
            <a class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Tutup</a>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Request Modal -->
  <div class="modal fade" id="requestModal" tabindex="-1" aria-labelledby="requestModalLabel" data-bs-backdrop="static" data-bs-keyboard="false" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable container">
      <div class="modal-content">
        <div class="modal-body bg-dark rounded">
          <p style="color:#fff;font-size: 17px;line-height: 1.3;">Setelah klik Ok! Harap <b>Izinkan/Allow</b> situs ini untuk akses sensor <b>Gerakan dan Orientasi (Motion and Orientation) pada perangkat anda agar fungsi alarm dapat berfungsi.</b></p>
          <div style="text-align: center;">
            <a class="btn btn-primary w-25" data-bs-dismiss="modal" onclick="iOS()">OK !</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Denied Modal -->
  <div class="modal fade" id="deniedModal" tabindex="-1" aria-labelledby="deniedModalLabel" data-bs-backdrop="static" data-bs-keyboard="false" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable container">
      <div class="modal-content">
        <div class="modal-body bg-dark rounded">
          <p style="color:#fff;font-size: 17px;line-height: 1.3;">Anda telah menolak / membatalkan izin situs ini untuk <b>Mengizinkan/Allow</b> situs ini untuk akses sensor <b>Gerakan dan Orientasi (Motion and Orientation)</b>. <br><br>Harap tutup browser, lalu buka kembali browser, dan izinkan kembali situs ini untuk akses sensor pada perangkat anda.<br><br>Aplikasi web ini membutuhkan akses sensor <b>Gerakan dan Orientasi (Motion and Orientation)</b> pada perangkat anda agar alarm dapat bekerja.</p>
          <div style="text-align: center;">
          </div>
        </div>
      </div>
    </div>
  </div>


  <audio id="ping" src="warning2.mp3" loop></audio>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
  crossorigin="anonymous"></script>
  <script src="main.js"></script>

</body>

</html>